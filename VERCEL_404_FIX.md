# Решение проблемы 404 на Vercel

## Проблема
Все страницы возвращают 404, хотя локально всё работает.

## Возможные причины и решения

### 1. Проверьте настройки проекта в Vercel

1. Откройте Vercel Dashboard → Ваш проект → Settings
2. Проверьте **"Root Directory"**:
   - Должно быть пусто или `.`
   - НЕ должно быть `src` или другой подпапки

3. Проверьте **"Framework Preset"**:
   - Должно быть `Next.js`

4. Проверьте **"Build Command**:
   - Должно быть `npm run build` или пусто (по умолчанию)

5. Проверьте **"Output Directory**:
   - Должно быть `.next` или пусто (по умолчанию)

### 2. Проверьте переменные окружения

Убедитесь, что все переменные окружения добавлены:
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CRON_SECRET`

### 3. Проверьте логи деплоя

1. Откройте Vercel Dashboard → Deployments
2. Выберите последний деплой
3. Проверьте логи сборки:
   - Есть ли ошибки?
   - Видны ли все роуты в выводе?

### 4. Пересоберите проект

1. В Vercel Dashboard → Deployments
2. Найдите последний деплой
3. Нажмите "Redeploy" или сделайте новый commit и push

### 5. Проверьте структуру проекта

Убедитесь, что структура правильная:
```
src/
  app/
    layout.tsx
    page.tsx
    login/
      page.tsx
    collection/
      page.tsx
    ...
```

### 6. Убедитесь, что нет конфликтующих файлов

В `src/app/` не должно быть:
- `App.tsx` (старый файл React Router)
- `router/` (старая папка React Router)
- Других файлов, которые могут мешать Next.js

### 7. Проверьте next.config.ts

Убедитесь, что конфигурация правильная:
- `pageExtensions` включает нужные расширения
- Нет конфликтующих настроек

### 8. Попробуйте очистить кеш

1. В Vercel Dashboard → Settings → General
2. Прокрутите вниз до "Build & Development Settings"
3. Нажмите "Clear Build Cache"
4. Сделайте новый деплой

### 9. Проверьте версию Node.js

В `package.json` должен быть указан правильный `engines`:
```json
{
  "engines": {
    "node": ">=20.9.0"
  }
}
```

### 10. Альтернативное решение

Если ничего не помогает, попробуйте:

1. Удалите проект из Vercel
2. Создайте новый проект
3. Импортируйте репозиторий заново
4. Добавьте переменные окружения
5. Задеплойте

## Быстрая проверка

Выполните в терминале:
```bash
# Проверьте локальную сборку
npm run build

# Проверьте, что все роуты видны
npm run build | grep "Route (app)"
```

Должны быть видны все роуты:
- `/`
- `/login`
- `/collection`
- `/graph`
- `/settings`
- `/trainer/*`
- `/api/*`

## Если проблема сохраняется

1. Проверьте логи деплоя на Vercel
2. Убедитесь, что сборка проходит успешно
3. Проверьте, что все зависимости установлены
4. Проверьте, что нет ошибок в консоли браузера

